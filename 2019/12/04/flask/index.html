
<!DOCTYPE html>
<html lang="en" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>flask - 馒++</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    
    <meta name="keywords" content="cocoa,"> 
    <meta name="description" content="建立第一个项目from flask import Flaskapp &amp;#x3D; Flask(__name__)@app.route(&amp;#39;&amp;#x2F;&amp;#39;)def hello_world,"> 
    <meta name="author" content="Hoto cocoa"> 
    <link rel="alternative" href="atom.xml" title="馒++" type="application/atom+xml"> 
    <link rel="icon" href="/img/logo.png"> 
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <link rel="stylesheet" href="/css/diaspora.css">
    
    
    <!--
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({
              google_ad_client: "ca-pub-8691406134231910",
              enable_page_level_ads: true
         });
    </script>
    <script async custom-element="amp-auto-ads"
        src="/js/amp-auto-ads-0.1.js">
    </script>
  -->

    <!--动态标题
<script>document.addEventListener('visibilitychange',function(){if(document.visibilityState=='hidden'){normal_title=document.title;document.title='人呢？快回来！';}else{document.title=normal_title;}});</script>
-->

</head>

<body class="loading">
    <span id="config-title" style="display:none">馒++</span>
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="icon-home image-icon" href="javascript:;" target="_blank" rel="noopener" data-url="http://hotococoa.com"></a>
    <div title="播放/暂停" class="icon-play"></div>
    <h3 class="subtitle">flask</h3>
    <div class="social">
        <!--<div class="like-icon">-->
            <!--<a href="javascript:;" target="_blank" rel="noopener" class="likeThis active"><span class="icon-like"></span><span class="count">76</span></a>-->
        <!--</div>-->
        <div>
            <div class="share">
                <a title="获取二维码" class="icon-scan" href="javascript:;" target="_blank" rel="noopener"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>

    <div class="section">
        <div class="article">
    <div class='main'>
        <h1 class="title">flask</h1>
        <div class="stuff">
            <span>十二月 04, 2019</span>
            
  <ul class="post-tags-list" itemprop="keywords"><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/flask/" rel="tag">flask</a></li><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/python/" rel="tag">python</a></li></ul>


        </div>
        <div class="content markdown">
            <h2 id="建立第一个项目"><a href="#建立第一个项目" class="headerlink" title="建立第一个项目"></a>建立第一个项目</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">from flask import Flaskapp &#x3D; Flask(__name__)</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">@app.route(&#39;&#x2F;&#39;)</span></pre></td></tr><tr><td class="code"><pre><span class="line">def hello_world():</span></pre></td></tr><tr><td class="code"><pre><span class="line">    return &#39;Hello World!&#39;</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span></pre></td></tr><tr><td class="code"><pre><span class="line">    app.run()</span></pre></td></tr></table></figure>
<p>运行  hello.py<br>$ python hello.py<br>* Running on <a href="http://127.0.0.1:5000" target="_blank" rel="noopener">http://127.0.0.1:5000</a><br>route()装饰器告诉Flask什么样的URL能触发函数。<br>用户访问 / 首页时调用hello_world()函数<br>app.run(host= None, port=None , debug=False, **options )  </p>
<ul>
<li>host : 主机ip地址 默认127.0.0.1，如果需要开放给其他机器访问可以填0.0.0.0  </li>
<li>port : 端口 默认5000  </li>
<li>debug: 调试模式  </li>
<li>options: 官方没讲 只丢了个连接。    </li>
</ul>
<hr>
<h2 id="变量规则"><a href="#变量规则" class="headerlink" title="变量规则"></a>变量规则</h2><ul>
<li>在route装饰器括号内 可以使用特殊标记 <var_name>传递参数 例：  <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@app.route(&#39;&#x2F;user&#x2F;&lt;usrname&gt;&#39;)</span></pre></td></tr><tr><td class="code"><pre><span class="line">def show_name(username):</span></pre></td></tr><tr><td class="code"><pre><span class="line">    # 函数参数username 必须与装饰器内特殊标记变量名一致</span></pre></td></tr><tr><td class="code"><pre><span class="line">    return &#39;hello %s&#39; % username</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">@app.route(&#39;&#x2F;user&#x2F;&lt;int:number&gt;&#39;):</span></pre></td></tr><tr><td class="code"><pre><span class="line">def show_number(number):</span></pre></td></tr><tr><td class="code"><pre><span class="line">    return &#39;这里接收了数字：%d&#39; % number</span></pre></td></tr><tr><td class="code"><pre><span class="line">    # 可以用这样的形式指定变量类型 &lt;type:name&gt;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    # 类型无法转换则不匹配</span></pre></td></tr><tr><td class="code"><pre><span class="line">    # 转换器有下面几种</span></pre></td></tr><tr><td class="code"><pre><span class="line">         int : 接收整数</span></pre></td></tr><tr><td class="code"><pre><span class="line">       float ：接收浮点数</span></pre></td></tr><tr><td class="code"><pre><span class="line">        path ：路径类型 接收斜杠</span></pre></td></tr></table></figure>

</li>
</ul>
<hr>
<h2 id="URL-重定向行为："><a href="#URL-重定向行为：" class="headerlink" title="URL/ 重定向行为："></a>URL/ 重定向行为：</h2><p>1 @app.route(‘/url_one/‘)   # URL路径后有斜杠   </p>
<ul>
<li>可以匹配 :   <a href="http://127.0.0.1:5000/url_one" target="_blank" rel="noopener">http://127.0.0.1:5000/url_one</a></li>
<li>这两个URL都会重定向到这:   <a href="http://127.0.0.1:5000/url_one/" target="_blank" rel="noopener">http://127.0.0.1:5000/url_one/</a>  </li>
<li>2 @app.route(‘/url_two’)    # URL路径后没有斜杠</li>
<li>不可以匹配: <a href="http://127.0.0.1:5000/url_two" target="_blank" rel="noopener">http://127.0.0.1:5000/url_two</a></li>
<li>可以匹配：<a href="http://127.0.0.1:5000/url_two/" target="_blank" rel="noopener">http://127.0.0.1:5000/url_two/</a></li>
</ul>
<p>这个行文使得遗忘斜杠时 允许关联的URL接任工作 保证URL唯一性<br>如果规则以斜杠结尾 当用户不带斜杠的形式请求 用户被自动重定向到带有斜杠的也页面<br>如果规则没有斜杠结尾 用户必须带斜杠请求 否则抛出404  </p>
<hr>
<h2 id="URL路由规则"><a href="#URL路由规则" class="headerlink" title="URL路由规则"></a>URL路由规则</h2><p>1 使用 flask.Flask.route() 装饰器<br>2 使用 flask.Flask.add_url_rule() 函数<br>3 直接访问暴露为 flask.Flask.url_map 的底层的Werkzeug 路由系统  ？？啥东西  </p>
<hr>
<h2 id="上传文件"><a href="#上传文件" class="headerlink" title="上传文件"></a>上传文件</h2><p>用 Flask 处理文件上传很简单。只要确保你没忘记在 HTML 表单中设置enctype=”multipart/form-data” 属性，不然你的浏览器根本不会发送文件。已上传的文件存储在内存或是文件系统中一个临时的位置。你可以通过请求对象的 files属性访问它们。每个上传的文件都会存储在这个字典里。它表现近乎为一个标准的 Python file 对象，但它还有一个 save() 方法，这个方法允许你把文件保存到服务器的文件系统上。这里是一个用它保存文件的例子:  </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">from flask import request</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">@app.route(&#39;&#x2F;upload&#39;, methods&#x3D;[&#39;GET&#39;, &#39;POST&#39;])def upload_file():</span></pre></td></tr><tr><td class="code"><pre><span class="line">if request.method &#x3D;&#x3D; &#39;POST&#39;:</span></pre></td></tr><tr><td class="code"><pre><span class="line">    f &#x3D; request.files[&#39;the_file&#39;] #　这个the_file 与模版里上传文件名一致</span></pre></td></tr><tr><td class="code"><pre><span class="line">    f.save(&#39;&#x2F;path&#x2F;file_name&#39;)</span></pre></td></tr></table></figure>

<p>传文件可是个经典的好问题了。文件上传的基本概念实际上非常简单， 他基本是这样工作的:<br>1 一个&lt;form&gt; 标签被标记有 enctype=multipart/form-data ，并且在里面包含一个&lt;input type=file&gt; 标签。<br>2 服务端应用通过请求对象上的 files 字典访问文件。<br>3 使用文件的 save() 方法将文件永久地保存在文件系统上的某处。  </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import os</span></pre></td></tr><tr><td class="code"><pre><span class="line">from flask</span></pre></td></tr><tr><td class="code"><pre><span class="line">import Flask, request, redirect, url_for</span></pre></td></tr><tr><td class="code"><pre><span class="line">from werkzeug import secure_filename</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">UPLOAD_FOLDER &#x3D; &#39;&#x2F;path&#x2F;to&#x2F;the&#x2F;uploads&#39;</span></pre></td></tr><tr><td class="code"><pre><span class="line">ALLOWED_EXTENSIONS &#x3D; set([&#39;txt&#39;, &#39;pdf&#39;, &#39;png&#39;, &#39;jpg&#39;, &#39;jpeg&#39;, &#39;gif&#39;])</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">app &#x3D; Flask(__name__)</span></pre></td></tr><tr><td class="code"><pre><span class="line">app.config[&#39;UPLOAD_FOLDER&#39;] &#x3D; UPLOAD_FOLDER</span></pre></td></tr></table></figure>
<p>UPLOAD_FOLDER 是我们储存上传的文件的地方，而ALLOWED_EXTENSIONS 则是允许的文件类型的集合。然后我们手动为应用添加一个的 URL 规则。我们通常很少这样做，但是为什么这里要如此呢？原因是我们希望实际部署的服务器 (或者我们的开发服务器）来为我们提供这些文件的访问服务，所以我们只需要一个规则用来生成指向这些文件的 URL 。  </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">def allowed_file(filename):</span></pre></td></tr><tr><td class="code"><pre><span class="line">    # 这里检查后缀名</span></pre></td></tr><tr><td class="code"><pre><span class="line">   return &#39;.&#39; in filename and \</span></pre></td></tr><tr><td class="code"><pre><span class="line">       filename.rsplit(&#39;.&#39;, 1)[1] in ALLOWED_EXTENSIONS</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">@app.route(&#39;&#x2F;&#39;, methods&#x3D;[&#39;GET&#39;, &#39;POST&#39;])</span></pre></td></tr><tr><td class="code"><pre><span class="line">def upload_file():</span></pre></td></tr><tr><td class="code"><pre><span class="line">   if request.method &#x3D;&#x3D; &#39;POST&#39;:</span></pre></td></tr><tr><td class="code"><pre><span class="line">       file &#x3D; request.files[&#39;file&#39;]</span></pre></td></tr><tr><td class="code"><pre><span class="line">       if file and allowed_file(file.filename):</span></pre></td></tr><tr><td class="code"><pre><span class="line">           filename &#x3D; secure_filename(file.filename)</span></pre></td></tr><tr><td class="code"><pre><span class="line">           file.save(os.path.join(app.config[&#39;UPLOAD_FOLDER&#39;], filename))</span></pre></td></tr><tr><td class="code"><pre><span class="line">           return redirect(url_for(&#39;uploaded_file&#39;,filename&#x3D;filename))</span></pre></td></tr><tr><td class="code"><pre><span class="line">   return &#39;&#39;&#39;</span></pre></td></tr><tr><td class="code"><pre><span class="line">       &lt;!doctype html&gt;</span></pre></td></tr><tr><td class="code"><pre><span class="line">       &lt;title&gt;Upload new File&lt;&#x2F;title&gt;</span></pre></td></tr><tr><td class="code"><pre><span class="line">       &lt;h1&gt;Upload new File&lt;&#x2F;h1&gt;</span></pre></td></tr><tr><td class="code"><pre><span class="line">       &lt;form action&#x3D;&quot;&quot; method&#x3D;post enctype&#x3D;multipart&#x2F;form-data&gt;</span></pre></td></tr><tr><td class="code"><pre><span class="line">         &lt;p&gt;&lt;input type&#x3D;file name&#x3D;file&gt;</span></pre></td></tr><tr><td class="code"><pre><span class="line">           &lt;input type&#x3D;submit value&#x3D;Upload&gt;</span></pre></td></tr><tr><td class="code"><pre><span class="line">         &lt;&#x2F;form&gt;</span></pre></td></tr></table></figure>

<p>尽量使用secure_filename() 作为文件名<br>现在我们来研究一下这个函数的功能:<br><code>&gt;&gt;&gt; secure_filename(&#39;../../../../home/username/.bashrc&#39;)</code><br><code>&#39;home_username_.bashrc&#39;</code>  </p>
<p>指定一个文件大小的上限</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">from flask import Flask, Request</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">app &#x3D; Flask(__name__)</span></pre></td></tr><tr><td class="code"><pre><span class="line">app.config[&#39;MAX_CONTENT_LENGTH&#39;] &#x3D; 16 * 1024 * 1024  # 限制了16M 超出会抛 RequestEntityToolarge异常</span></pre></td></tr></table></figure>

<p><img src="https://hotobun.gitee.io/hexo/img/archive_img/flask1.png" alt="flask1"><br><img src="https://hotobun.gitee.io/hexo/img/archive_img/flask2.png" alt="flask2"></p>
<hr>
<h2 id="静态文件"><a href="#静态文件" class="headerlink" title="静态文件"></a>静态文件</h2><p>render_template 和 url_for 的应用:<br><img src="https://hotobun.gitee.io/hexo/img/archive_img/flask3.png" alt="flask3"><br><img src="https://hotobun.gitee.io/hexo/img/archive_img/flask4.png" alt="flask4"></p>
<p>html模版语言中  </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;&#123; value_name &#125;&#125;  两个花括号内的是变量名 值是从render_template参数传过去  </span></pre></td></tr><tr><td class="code"><pre><span class="line">&#123;% if .. %&#125;    花括号类似编程语法 注意结束时 endif    </span></pre></td></tr><tr><td class="code"><pre><span class="line">&#123;% endif %&#125;    for 等操作同理</span></pre></td></tr></table></figure>


<hr>
<h2 id="模版渲染"><a href="#模版渲染" class="headerlink" title="模版渲染"></a>模版渲染</h2><p>render_template 渲染模版 默认传进的参数 带有html标签符会自动转义<br>如果想要从render_template传递带有标签符的内容 使用Markup函数：<br># 只有 Markup 不转义<br><img src="https://hotobun.gitee.io/hexo/img/archive_img/flask5.png" alt="flask5"><br><img src="https://hotobun.gitee.io/hexo/img/archive_img/flask6.png" alt="flask6"></p>
<hr>
<h2 id="用户注册"><a href="#用户注册" class="headerlink" title="用户注册"></a>用户注册</h2><p><img src="https://hotobun.gitee.io/hexo/img/archive_img/flask7.png" alt="flask7"><br>request.form 接收用户post的表单 用法与字典类似。<br>request.args 接收用户get的url参数  </p>
<hr>
<h2 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h2><ul>
<li>在项目目录下 新建一个config.py 文件  </li>
<li>在文件里面写入配置信息  </li>
<li>项目主文件通过以下方式即可导入  <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import config  </span></pre></td></tr><tr><td class="code"><pre><span class="line">app.config.from_object(config)</span></pre></td></tr></table></figure>

</li>
</ul>
<hr>
<h2 id="连接数据库"><a href="#连接数据库" class="headerlink" title="连接数据库"></a>连接数据库</h2><p>使用mysql 依赖库： pymysql、 flask_sqlalchemy  </p>
<ul>
<li>创建 config.py</li>
<li>写入 SQLALCHEMY_DATABASE_URI<br><img src="https://hotobun.gitee.io/hexo/img/archive_img/flask8.png" alt="flask8"><br><img src="https://hotobun.gitee.io/hexo/img/archive_img/flask9.png" alt="flask9"></li>
</ul>
<hr>
<h2 id="ORM模型"><a href="#ORM模型" class="headerlink" title="ORM模型"></a>ORM模型</h2><p>模型类需要继承 上面第7行的db.Model属性<br>需要映射到表中的属性，必须写成 db.Column()的数据类型  </p>
<ul>
<li>db.Integer：整形  </li>
<li>db.String： 字符串，需要指定最长的长度  </li>
<li>db.Text：  text类型  </li>
<li>primary_key  –&gt; 主键  </li>
<li>autoincrement –&gt; 自增长  </li>
<li>nullable    –&gt; 默认可为空  False则不允许为空  </li>
</ul>
<p>最后调用 db.create_all() 将模型创建到数据库<br><img src="https://hotobun.gitee.io/hexo/img/archive_img/flask10.png" alt="flask10"></p>
<hr>
<h2 id="数据库增删改查"><a href="#数据库增删改查" class="headerlink" title="数据库增删改查"></a>数据库增删改查</h2><p>定义若干视图函数，当url访问时再调用函数</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@app.route(&quot;&#x2F;&quot;)</span></pre></td></tr><tr><td class="code"><pre><span class="line">def sql_xxx():</span></pre></td></tr><tr><td class="code"><pre><span class="line">    # 增:</span></pre></td></tr><tr><td class="code"><pre><span class="line">    article1 &#x3D; Article(title &#x3D; &#39;aaaaa&#39;, content &#x3D; &#39;bbbbb&#39;)</span></pre></td></tr><tr><td class="code"><pre><span class="line">    db.session.add(article1)  # 通过session属性 增加到数据库事务</span></pre></td></tr><tr><td class="code"><pre><span class="line">    db.session.commit()       # 这句话才是将事务提交 将数据保存至数据库</span></pre></td></tr><tr><td class="code"><pre><span class="line">   </span></pre></td></tr><tr><td class="code"><pre><span class="line">    ---------分割线</span></pre></td></tr><tr><td class="code"><pre><span class="line">    # 查：</span></pre></td></tr><tr><td class="code"><pre><span class="line">       # Article继承自db.Model，通过父类query属性进行查找操作 所有查找必须通过这个属性</span></pre></td></tr><tr><td class="code"><pre><span class="line">       # 通过filter过滤 参数: 模型类.属性名 &#x3D; val  </span></pre></td></tr><tr><td class="code"><pre><span class="line">       # .all()后下标可以换成.first() 如果没有数据 返回None  都是取出第一个数据</span></pre></td></tr><tr><td class="code"><pre><span class="line">    article2 &#x3D; Article.query.filter(Article.title&#x3D;&#x3D;&#39;aaaaa&#39;).all()[0]</span></pre></td></tr><tr><td class="code"><pre><span class="line">    print (&quot;title   --&gt; &quot;, article2.title)</span></pre></td></tr><tr><td class="code"><pre><span class="line">    print (&#39;content --&gt; &#39;, article2.content)</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">   ---------分割线</span></pre></td></tr><tr><td class="code"><pre><span class="line">    # 改:</span></pre></td></tr><tr><td class="code"><pre><span class="line">    1 把数据查找出来</span></pre></td></tr><tr><td class="code"><pre><span class="line">    2 修改这条数据</span></pre></td></tr><tr><td class="code"><pre><span class="line">    3 提交事务</span></pre></td></tr><tr><td class="code"><pre><span class="line">    article3 &#x3D; Article.query.filter(Article.title &#x3D;&#x3D; &#39;aaaaa&#39;).first()</span></pre></td></tr><tr><td class="code"><pre><span class="line">    article3.content &#x3D; &#39;new content&#39;</span></pre></td></tr><tr><td class="code"><pre><span class="line">    db.session.commit()</span></pre></td></tr><tr><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="code"><pre><span class="line">   ---------分割线</span></pre></td></tr><tr><td class="code"><pre><span class="line">    # 删:</span></pre></td></tr><tr><td class="code"><pre><span class="line">    1 把数据查找出来</span></pre></td></tr><tr><td class="code"><pre><span class="line">    2 把这条数据删除</span></pre></td></tr><tr><td class="code"><pre><span class="line">    3 做事务提交</span></pre></td></tr><tr><td class="code"><pre><span class="line">    article4 Article.query.filter(Article.title &#x3D;&#x3D; &#39;aaaaa&#39;).first()</span></pre></td></tr><tr><td class="code"><pre><span class="line">    db.session.delete(article4)</span></pre></td></tr><tr><td class="code"><pre><span class="line">    db.session.commit()</span></pre></td></tr></table></figure>

<hr>
<h2 id="flask-script-使用命令行操作Flask"><a href="#flask-script-使用命令行操作Flask" class="headerlink" title="flask_script 使用命令行操作Flask:"></a>flask_script 使用命令行操作Flask:</h2><p><img src="https://hotobun.gitee.io/hexo/img/archive_img/flask11.png" alt="flask11"><br><img src="https://hotobun.gitee.io/hexo/img/archive_img/flask12.png" alt="flask12"><br><img src="https://hotobun.gitee.io/hexo/img/archive_img/flask13.png" alt="flask13"><br><img src="https://hotobun.gitee.io/hexo/img/archive_img/flask14.png" alt="flask14">  </p>
<hr>
<h2 id="循环引用问题："><a href="#循环引用问题：" class="headerlink" title="循环引用问题："></a>循环引用问题：</h2><p>主文件导入Models<br>Models文件又导入主文件的app 就会产生循环引用的问题<br>解决方法：<br>新建一个exts.py 里面创建SQLAlichemy实例</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">from flask_sqlalchemy import SQLAlchemy</span></pre></td></tr><tr><td class="code"><pre><span class="line">db &#x3D; SQLAlchemy()</span></pre></td></tr></table></figure>
<p>Models和主文件都从这里导入db 就切断循环引用<br>主文件内使用  </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">from exts import db</span></pre></td></tr><tr><td class="code"><pre><span class="line">db.init_app(app)</span></pre></td></tr></table></figure>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="false">
                <source type="audio/mpeg" src="">
            </audio>
            
                <ul id="audio-list" style="display:none">
                    
                        
                            <li title='0' data-url='https://hotobun.gitee.io/hexo/music/re.mp3'></li>
                        
                    
                </ul>
            
        </div>
         
    <div id='gitalk-container' class="comment link"
        data-ae='true'
        data-ci='1300b5a0ebcfedf6301e'
        data-cs='aa47d2be8d26a5880165e086fd136160923c6e30'
        data-r='HexoGitalk'
        data-o='Hotobun'
        data-a='Hotobun'
        data-d='false'
    >查看评论</div>


    </div>
    
</div>


    </div>
</div>
</body>
<script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/diaspora.js"></script>
<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">
<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>




</html>
